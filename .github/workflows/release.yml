name: Install and Extract Uno Calculator Snap

on:
  workflow_dispatch:

jobs:
  extract-snap:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Install Snapd and Uno Calculator
        run: |
          sudo apt update
          sudo apt install snapd -y
          sudo snap install uno-calculator

      - name: Locate and Copy Snap File
        run: |
          SNAP_FILE=$(ls /var/lib/snapd/snaps | grep uno-calculator | head -n 1)
          echo "Found snap file: $SNAP_FILE"
          sudo cp /var/lib/snapd/snaps/$SNAP_FILE ./
          echo "Snap file copied to workspace."

      - name: List Workspace Contents
        run: ls -lh

      - name: Upload Snap Artifact
        uses: actions/upload-artifact@v3
        with:
          name: uno-calculator-snap
          path: uno-calculator_*.snap
